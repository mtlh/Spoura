generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model User {
  id           Int     @id @default(autoincrement())
  name         String?
  email        String  @unique
  profileViews Int     @default(0)
  role         Role    @default(USER)
  purchase     Json
}

enum Role {
  USER
  ADMIN
}

model Collection {
  id     Int     @id @default(autoincrement())
  name   String  @db.VarChar(50)
  url_slug String?
  products Product[]

  @@unique([id, name])
}

model Product {
  id     Int     @id @default(autoincrement())
  name   String  @db.VarChar(50)
  brand String @db.VarChar(50)
  price  Decimal @db.Decimal(10, 2)
  imgurl Json
  collection Collection? @relation(fields: [col_id, col_name], references: [id, name])
  col_id Int?
  col_name String?
  colour Json
  fit    Json
  size   Json
  review Json

  @@index([col_id, col_name])
}
